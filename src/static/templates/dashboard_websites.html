{% extends "dashboard_base.html" %}

{% block title %}My Websites - {{ super() }}{% endblock %}

{% block dashboard_title %}My Websites{% endblock %}

{% block dashboard_content %}
<div class="my-websites">
    {% if websites %}
        <div class="websites-list">
            {% for website in websites %}
                <div class="website-card">
                    <div class="website-info">
                        <h3>{{ website.template.name }}</h3>
                        <p><strong>Status:</strong> <span class="status-badge status-{{ website.status }}">{{ website.status|title }}</span></p>
                        <p><strong>Ordered:</strong> {{ website.created_at.strftime('%B %d, %Y') }}</p>
                        {% if website.status == 'completed' %}
                            <p><strong>Completed:</strong> {{ website.completed_at.strftime('%B %d, %Y') }}</p>
                            <p><strong>Website URL:</strong> <a href="{{ website.url }}" target="_blank">{{ website.url }}</a></p>
                        {% endif %}
                    </div>
                    
                    <div class="website-actions">
                        {% if website.status == 'pending' %}
                            <p>Your website is being prepared. We'll notify you when it's ready.</p>
                        {% elif website.status == 'in_progress' %}
                            <p>Your website is currently being built. We'll notify you when it's ready.</p>
                        {% elif website.status == 'completed' %}
                            <a href="{{ url_for('user.dashboard_changes', website_id=website.id) }}" class="button">Request Changes</a>
                            <a href="{{ website.url }}" target="_blank" class="button">View Website</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-websites">
            <p>You don't have any websites with us yet.</p>
            <p>Ready to get started? Browse our templates and order your new website today!</p>
            <a href="{{ url_for('main.templates') }}" class="cta-button">Browse Templates</a>
        </div>
    {% endif %}
    
    {% if websites %}
        <div class="order-new">
            <h3>Want Another Website?</h3>
            <p>Need a website for another business or project? We've got you covered!</p>
            <a href="{{ url_for('main.templates') }}" class="cta-button">Order New Website</a>
        </div>
    {% endif %}
</div>
{% endblock %}
